<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/jquery.mobile.structure-1.1.0.css" />
<link rel="stylesheet" href="css/extra.css" />
<script src="phonegap.js"></script>
<script src="js-lib/jquery.js"></script>
<script src="js-lib/jquery.mobile.js"></script>
<script src="js/hound.js"></script>
<script src="js/hound.conf.js"></script>
<script src="js/hound.display.js"></script>
<script src="js/hound.connection.js"></script>
<script src="js-lib/jquery.validate.js"></script>
<script src="js-lib/handlebars.js"></script>
<script type="text/javascript"
	src="http://maps.google.com/maps/api/js?sensor=true">

</script>
<script type="text/javascript">
	document.addEventListener("deviceready", onDeviceReady, false);
	function onDeviceReady() {
		$("#jqueryStyle").html(localStorage.getItem("tema"));
		hound.loadApp();
		hound.displayMainMenu();
		hound.validateComentario();
	};
	$(document).bind(
			"pagechange",
			function(e, data) {
				if (typeof data.toPage === "object") {
					if (data.toPage.attr("id") === "Comentarios") {
						$.mobile.showPageLoadingMsg("a",
								"Descargando Actualizaciones", false);
						if (hound.errores) {
							hound.errores.resetForm();
						}
						$('#comentariosForm').reset();
						$.mobile.hidePageLoadingMsg();
					} else if (data.toPage.attr("id") === "Catalogo") {
						$("#contenidoCatalogo").slideDown();
						$("#listCatalogos").listview("refresh");
					} else if (data.toPage.attr("id") === "Contactos") {
						$("#contenidoContactos").slideDown();
						$("#listContactos").listview("refresh");
					} else if (data.toPage.attr("id") === "Articulos") {
						$("#contenidoArticulos").slideDown();
						$("#listArticulos").listview("refresh");
					} else if (data.toPage.attr("id") === "Articulo") {
						$("#contenidoArticulo").slideDown();
					} else if (data.toPage.attr("id") === "Encuestas") {
						$("#listEncuestas").slideDown();
						$("#listEncuestas").listview("refresh");
					} else if (data.toPage.attr("id") === "Encuesta") {
						$("#contenidoEncuesta").slideDown();
					} else if (data.toPage.attr("id") === "Promociones") {
						$("#listPromociones").listview("refresh");
						$("#contenidoPromociones").slideDown();
					} else if (data.toPage.attr("id") === "Promocion") {
						$("#contenidoPromocion").slideDown();
					} else if (data.toPage.attr("id") === "listaLocalizador") {
						$("#contenidoListaLocalizador").slideDown();
						$("#listListaLocalizador").listview("refresh");
					}
					if (data.toPage.attr("id") === "Mapa") {

					} else {
						$.mobile.hidePageLoadingMsg();
					}
				}
			});
</script>
<style type="text/css" id="jqueryStyle">
</style>
</head>
<body>
	<div data-role="page" data-theme="a" id="menuPrincipal">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloMenuPrincipal"> </span>
		</div>
		<!-- /header -->
		<div data-role="content" id="contenido">
			<ul data-role="listview" data-inset="true">
				<li id="menuCatalogo"><a href=""
					onclick="hound.getCategorias();"> <img src=""
						class="ui-li-icon" id="imagenCatalogo" /> <span id="textoCatalogo"></span></a>
				</li>
				<li id="menuContactos"><a href="#"
					onclick="hound.getContactosOffLine();"> <img src=""
						class="ui-li-icon" id="imagenContactos" /> <span
						id="textoContactos"></span>
				</a></li>
				<li id="menuPromociones"><a href="#"
					onclick="hound.getPromocionesOffline();"> <img src=""
						class="ui-li-icon" id="imagenPromociones" /> <span
						id="textoPromociones"></span></a></li>
				<li id="menuEncuesta"><a href=""
					onclick="hound.getEncuestas();"> <img src="" class="ui-li-icon"
						id="imagenEncuesta" /> <span id="textoEncuesta"></span></a></li>
				<li id="menuLocalizador"><a href=""
					onclick="hound.inicializaMapa();"> <img src=""
						class="ui-li-icon" id="imagenLocalizador" /> <span
						id="textoLocalizador"></span></a></li>
				<li id="menuComentarios"><a href="#Comentarios"
					data-transition="slide"> <img src="" class="ui-li-icon"
						id="imagenComentarios" /> <span id="textoComentarios"></span></a></li>
			</ul>
		</div>
		<!-- /content -->
	</div>
	<div data-role="page" data-theme="a" id="Catalogo">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloCatalogo"> </span>
		</div>
		<div data-role="content" id="contenidoCatalogo">
			<ul data-role="listview" data-theme="a" id="listCatalogos"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Articulos">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloArticulos"> </span>
		</div>
		<div data-role="content" id="contenidoArticulos">
			<ul data-role="listview" data-theme="a" id="listArticulos"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Articulo">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloArticulo"> </span>
		</div>
		<div data-role="content" id="contenidoArticulo"></div>
	</div>
	<div data-role="page" data-theme="a" id="Contactos">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloContactos"> </span>
		</div>
		<div data-role="content" id="contenidoContactos">
			<ul data-role="listview" data-theme="a" id="listContactos"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Promociones">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloPromociones"> </span>
		</div>
		<div data-role="content" id="contenidoPromociones">
			<ul data-role="listview" data-theme="a" id="listPromociones"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Promocion">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloPromocion"> </span>
		</div>
		<div data-role="content" id="contenidoPromocion"></div>
	</div>
	<div data-role="page" data-theme="a" id="Encuestas">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloEncuestas"></span>
		</div>
		<div data-role="content" id="contenidoEncuestas">
			<ul data-role="listview" data-theme="a" id="listEncuestas"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Encuesta">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloEncuesta"> </span>
		</div>
		<div data-role="content" id="contenidoEncuesta"></div>
	</div>
	<div data-role="page" data-theme="a" id="Localizador">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloLocalizador"> </span>
		</div>
		<div data-role="content" id="contenidoLocalizador"></div>
	</div>
	<div data-role="page" data-theme="a" id="opcionesLocalizador">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloOpcionesLocalizador">Opciones</span>
		</div>
		<div data-role="content" id="contenidoOpcionesLocalizador">
			<ul data-role="listview" data-inset="true">
				<li><a href="" onclick="hound.displayTiendas()">Lista de
						ubicaciones</a></li>
				<li><a href="" onclick="hound.displayTienda(hound.cercano.id);">Ubicacion
						mas cercana</a></li>
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="listaLocalizador">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloListaLocalizador">Ubicaciones
				existentes</span>
		</div>
		<div data-role="content" id="contenidoListaLocalizador">
			<ul data-role="listview" data-theme="a" id="listListaLocalizador"
				data-inset="true">
			</ul>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Mapa">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloMapa">Mapa</span>
		</div>
		<div data-role="content" id="contenidoMapa">
			<div id="map_directions" style=""></div>
			<div id="map_canvas"
				style="width: 100%; height: 350px; color: #222222;"></div>
		</div>
	</div>
	<div data-role="page" data-theme="a" id="Comentarios">
		<div data-role="header" data-position="fixed">
			<span class="ui-title" id="tituloComentarios"> </span>
		</div>
		<div data-role="content" id="contenidoComentarios">
			<div id="erroresComentariosForm"></div>
			<form id="comentariosForm">
				<ul data-role="listview" data-inset="true">
					<li data-role="fieldcontain">
						<label for="comentarioNombre">Nombre:</label>
						<input type="text" name="comentarioNombre" id="comentarioNombre"
						class="required" /></li>
					<li data-role="fieldcontain">
						<label for="comentarioEmail">Email:</label>
						<input type="text" name="comentarioEmail" id="comentarioEmail"
						class="required email" />
						</li>
					<li data-role="fieldcontain">

						<label for="comentarioTelefono">Telefono:</label>
						<input type="text" name="comentarioTelefono"
						id="comentarioTelefono" class="digits" minlength="8"
						maxlength="12" />
					</li>
					<li data-role="fieldcontain">
					<label for="comentarioComentario">Comentario:</label>
					<textarea name="comentarioComentario" id="comentarioComentario"
						class="required"></textarea>
						</li>
					</ul>
					<a href="" data-role="button" onclick="hound.enviarComentario();">Enviar</a>
			</form>
		</div>
	</div>
	<script type="text/javascript">
		onDeviceReady();
	</script>
	<script id="listCategoriasTemplate" type="text/x-handlebars-template">
				<li><a onclick="hound.getArticulos({{categoria.idCategoria}});" href="" id="categoria{{categoria.idCategoria}}"><img src="{{baseURL}}categorias/{{categoria.idCategoria}}/icono.png" class="ui-li-icon"/><span>{{categoria.nombre}}</span> <span class="ui-li-count">{{categoria.numeroArticulos}}</span></a></li>
    </script>

	<script id="listContactosTemplate" type="text/x-handlebars-template">
				<li>
					<img src="images/telefono-y-correo.jpg" class="ui-li-icon"/>
						<h3>{{contacto.nombre}}</h3>
					<br/>
					<span class="">{{contacto.direccion}}</span>
						<br/>
					<span class="">{{contacto.email}}</span>
						<br/>
					<span class="">{{contacto.telefono}}</span>
						<br/>
				</li>
    </script>
	<script id="listArticulosTemplate" type="text/x-handlebars-template">
				<li><a onclick="hound.getArticulo({{articulo.idArticulo}});" href="" id="articulo{{articulo.idArticulo}}"><img src="{{baseURL}}articulos/{{articulo.idArticulo}}/icono.jpg" class="ui-li-icon"/><span>{{articulo.nombre}}</span><p>{{articulo.descripcion}}</p></a></li>
    </script>
	<script id="listEncuestasTemplate" type="text/x-handlebars-template">
				<li><a onclick="hound.getEncuesta({{encuesta.idEncuesta}});" href="" id="encuesta{{encuesta.idEncuesta}}"><h3>{{encuesta.nombre}}</h3><p>{{encuesta.descripcion}}</p></a></li>
    </script>
	<script id="articuloTemplate" type="text/x-handlebars-template">
		<img src="{{baseURL}}/articulos/{{articulo.idArticulo}}/imagen.jpg" style="max-width:100%;"/>
		<p>{{articulo.detalle}}</p>
		<h2>Precio:${{articulo.precio}}</h2>
    </script>
	<script id="listPromocionesTemplate" type="text/x-handlebars-template">
				<li><a onclick="hound.getPromocionOffline({{promocion.idPromocion}});" href="" id="promocion{{promocion.idPromocion}}"><img src="data:image/jpeg;base64,{{promocion.icono}}" class="ui-li-icon"/><h3>{{promocion.nombre}}</h3><p>{{promocion.descripcion}}</p></a></li>
    </script>
	<script id="promocionTemplate" type="text/x-handlebars-template">
		<img src="data:image/jpeg;base64,{{promocion.imagen}}" style="max-width:100%;"/>
		<p>{{promocion.detalle}}</p>
		<h2>Vigencia: {{promocion.vigencia}}</h2>
    </script>
	<script id="encuestaTemplate" type="text/x-handlebars-template">
		{{#encuesta}}
			<fieldset data-role="controlgroup" >
			<li data-swatch="a" class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-top" data-role="list-divider" role="" data-form="ui-bar-a">{{pregunta}}</li>
			{{#respuestas}}
     		<input type="radio" name="pregunta{{../idPregunta}}" id="respuesta{{idRespuesta}}" value="{{idRespuesta}}" checked="true"/>
     		<label for="respuesta{{idRespuesta}}">{{respuesta}}</label>
			{{/respuestas}}
			</fieldset>
		{{/encuesta}}
		<a href="" data-role="button" onclick="hound.enviarEncuesta()">Contestar</a>
    </script>
	<script id="listTiendasTemplate" type="text/x-handlebars-template">
				<li><a onclick="hound.displayTienda({{tienda.idTienda}});" href="" id="tienda{{tienda.idTienda}}"><h3>{{tienda.nombre}}</h3><p>{{tienda.direccion}}</p> </a></li>
    </script>

</body>
</html>
